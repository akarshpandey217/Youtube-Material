/*
 youtube-material 2016-08-02 
*/
!function(a){youtubeApp.controller("channelPageAboutController",["$scope","$state","$stateParams","searchService",function(b,c,d,e){b.init=function(){a.element(document).scrollTo(0,0,700),b.$parent.border={},b.$parent.border.about={"border-bottom":"3px solid #FBB"};var c={part:"statistics",channelId:d.id};e.getChannel(c).then(function(a){a.statistics.viewCount=parseInt(a.statistics.viewCount).toLocaleString(),a.statistics.subscriberCount=parseInt(a.statistics.subscriberCount).toLocaleString(),a.statistics.videoCount=parseInt(a.statistics.videoCount).toLocaleString(),b.$parent.channel.statistics=a.statistics})}}])}(window.angular),function(a){youtubeApp.controller("channelPageChannelsController",["$scope","$state","$stateParams","searchService",function(b,c,d,e){b.init=function(){a.element(document).scrollTo(0,0,700),b.$parent.border={},b.$parent.border.channels={"border-bottom":"3px solid #FBB"},b.loaderFeatured=!0,b.$parent.deferedChannel.promise.then(function(a){if(!a.brandingSettings.channel.featuredChannelsUrls)return void(b.loaderFeatured=!1);for(var c=[],d=0;d<a.brandingSettings.channel.featuredChannelsUrls.length;d++)c+=a.brandingSettings.channel.featuredChannelsUrls[d]+",";var f={channelIds:c,part:"snippet",fields:"items(id,snippet(thumbnails/medium,title))"};e.getChannels(f).then(function(a){b.featuredChannels=a,b.loaderFeatured=!1})}),b.loaderSubscribed=!0,b.subscriptionsAllowed=!0;var c={part:"snippet",channelId:d.id,maxResults:50,fields:"items(snippet(resourceId/channelId,thumbnails/medium,title))"};e.getSubscriptions(c).then(function(a){a.items.length&&(b.subscribedChannels=a.items,b.loaderSubscribed=!1)},function(a){b.subscriptionsAllowed=!1,b.loaderSubscribed=!1})}}])}(window.angular),function(a){youtubeApp.controller("channelPageController",["$q","$document","$rootScope","$scope","$state","$stateParams","searchService",function(a,b,c,d,e,f,g){d.init=function(){var e={part:"snippet,brandingSettings",channelId:f.id,fields:"items(brandingSettings(channel(description,featuredChannelsTitle,featuredChannelsUrls),image(bannerMobileImageUrl,bannerTabletImageUrl)),snippet(description,publishedAt,thumbnails/medium,title))"};d.deferedChannel=a.defer(),d.channel={},g.getChannel(e).then(function(a){d.channel.brandingSettings=a.brandingSettings,d.channel.snippet=a.snippet,d.channel.snippet.publishedAt=moment(d.channel.snippet.publishedAt).format("Do MMM, YYYY"),d.channel.brandingSettings||(d.channel.brandingSettings={}),d.channel.brandingSettings.channel||(d.channel.brandingSettings.channel={}),d.channel.brandingSettings.channel.featuredChannelsTitle=d.channel.brandingSettings.channel.featuredChannelsTitle?d.channel.brandingSettings.channel.featuredChannelsTitle:"Featured Channels",d.channel.snippet.description=d.channel.snippet.description?d.channel.snippet.description:"No Description Available",d.deferedChannel.resolve(d.channel)}),b.on("scroll",function(){var a=document.getElementById("channel-banner").getBoundingClientRect();a.bottom<(c.isMobile?56:64)?"channel-tab-main-div-fixed"!=d.channelTab&&(d.$apply(d.channelTab="channel-tab-main-div-fixed"),d.$apply(d.channelTabContent="channel-tab-content-fixed")):"channel-tab-main-div"!=d.channelTab&&(d.$apply(d.channelTab="channel-tab-main-div"),d.$apply(d.channelTabContent=""))}),d.border={}},d.selectBorder=function(){},d.changeState=function(a){switch(a){case 0:e.go("home.channelPage.home"),d.border={},d.border.home={"border-bottom":"3px solid #FBB"};break;case 1:e.go("home.channelPage.videos"),d.border={},d.border.videos={"border-bottom":"3px solid #FBB"};break;case 2:e.go("home.channelPage.channels"),d.border={},d.border.channels={"border-bottom":"3px solid #FBB"};break;case 3:e.go("home.channelPage.about"),d.border={},d.border.about={"border-bottom":"3px solid #FBB"}}}}])}(window.angular),function(a){youtubeApp.controller("channelPageHomeController",["$scope","$state","$stateParams","searchService",function(b,c,d,e){b.init=function(){a.element(document).scrollTo(0,0,700),b.$parent.border={},b.$parent.border.home={"border-bottom":"3px solid #FBB"},b.channelId=d.id,b.mostPopular={title:"Most Popular",value:"viewCount"},b.recent={title:"Recently Uploaded",value:"date"}}}])}(window.angular),function(a){youtubeApp.controller("channelPageVideosController",["$scope","$state","$stateParams","searchService",function(b,c,d,e){b.init=function(){a.element(document).scrollTo(0,0,700),b.$parent.border={},b.$parent.border.videos={"border-bottom":"3px solid #FBB"},b.loaderVideos=!0;var c={channelId:d.id,order:"date",maxResults:24};e.searchVideos(c).then(function(a){b.videos=a.items,b.loaderVideos=!1,b.nextPageToken=a.nextPageToken;var c={videos:b.videos,part:"statistics,contentDetails"};e.getVideoDetails(c).then(function(a){b.videoDetails=a})}),b.loadMoreVideos=function(){var a={channelId:d.id,order:"date",pageToken:b.nextPageToken};b.loaderVideos=!0,b.nextPageToken=!1,e.searchVideos(a).then(function(a){b.videos=b.videos.concat(a.items),b.loaderVideos=!1,b.nextPageToken=a.nextPageToken;var c={videos:a.items,part:"statistics,contentDetails"};e.getVideoDetails(c).then(function(a){b.videoDetails=b.videoDetails.concat(a)})})}}}])}(window.angular),function(a){youtubeApp.controller("headerController",["$rootScope","$scope","$state","$location","searchService",function(a,b,c,d,e){b.fetchSearchSuggestion=function(){b.query&&(b.tinySpinner=!0,e.getSearchSuggestion(b.query).then(function(a){b.tinySpinner=!1,b.selectedIndex=-1,b.items=a,0!=a[1].length&&b.search_li?b.searchSuggestion=!0:b.searchSuggestion=!1}))},b.suggestionClick=function(a){b.query=a,b.submit()},b.searchFocused=function(){b.search_ul="nav-items-focus right",b.search_li="search-item-li-focus",b.mobileSearchFocus="mobile-search-focus",b.searchSuggestion=!0,b.crossSign=!0,b.fetchSearchSuggestion(),b.items=[]},b.searchBlured=function(){b.search_ul="right nav-items",b.search_li="",b.mobileSearchFocus="",b.crossSign=!1,b.searchSuggestion=!1,b.selectedIndex=-1,b.items=[]},b.submit=function(){c.go("home.searchVideos",{query:b.query,pageToken:null})},b.inputKeypress=function(a){38==a.keyCode&&a.preventDefault(),13==a.keyCode?(a.target.blur(),b.submit()):40==a.keyCode&&b.items[1].length>b.selectedIndex+1&&b.items!=[]?(b.selectedIndex++,b.query=b.items[1][b.selectedIndex]):38==a.keyCode&&b.selectedIndex>0&&b.items!=[]&&(b.selectedIndex--,b.query=b.items[1][b.selectedIndex])},b.mouseOver=function(a){b.selectedIndex=a},b.init=function(){d.search().query?b.query=d.search().query:b.query="",b.searchBlured(),a.$on("$stateChangeStart",function(a,b){NProgress.start()}),a.$on("$stateChangeSuccess",function(a){NProgress.inc(),setTimeout(NProgress.inc,300),setTimeout(NProgress.done,600)});var c=function(){window.innerWidth<600?(a.isMobile=!0,a.isTablet=!1,a.mobilePaddingMargin="zero-padding zero-margin"):window.innerWidth<991?(a.isMobile=!1,a.isTablet=!0,a.mobilePaddingMargin=""):(a.isMobile=!1,a.isTablet=!1,a.mobilePaddingMargin="")};$(window).resize(function(){b.$apply(function(){c()})}),c()}}])}(window.angular),function(a){youtubeApp.controller("homePageController",["$scope","$state","searchService","$stateParams",function(a,b,c,d){a.videoCategories=[{snippet:{title:"Popular Now"}},{id:10,snippet:{title:"Music"}},{id:23,snippet:{title:"Comedy"}},{id:1,snippet:{title:"Film & Animation"}},{id:17,snippet:{title:"Sports"}},{id:24,snippet:{title:"Entertainment"}},{id:19,snippet:{title:"Travel & Events"}},{id:20,snippet:{title:"Gaming"}},{id:22,snippet:{title:"People & Blogs"}}]}])}(window.angular),function(a){youtubeApp.controller("youtubeController",["$scope","$state","searchService","$stateParams",function(a,b,c,d){a.submit=function(){a.preloader=!0,a.videos=!1,a.nextPageToken=!1,a.previousPageToken=!1;var b={pageToken:d.pageToken,query:d.query,maxResults:16};c.searchVideos(b).then(function(b){a.videos=b.items,a.nextPageToken=b.nextPageToken,a.previousPageToken=b.prevPageToken,a.preloader=!1;var d={videos:a.videos,part:"statistics,contentDetails"};c.getVideoDetails(d).then(function(b){a.videoDetails=b})})},a.nextOrPrevious=function(a){b.go("home.searchVideos",{query:d.query,pageToken:a})},a.submit()}])}(window.angular),function(a){youtubeApp.controller("sidenavController",["$scope","$state","$stateParams","$rootScope",function(a,b,c,d){a.init=function(){d.isMobile||d.isTablet?(d.sidenavMargin="side-nav-margin-off",d.sidenavLeft="sidenav-off",d.isSideNavOn=!1):(d.sidenavMargin="side-nav-margin-on",d.sidenavLeft="sidenav-on",d.isSideNavOn=!0),d.toggleSidenav=function(){d.isSideNavOn?(d.sidenavMargin="side-nav-margin-off",d.sidenavLeft="sidenav-off",d.isSideNavOn=!1):(d.sidenavMargin="side-nav-margin-on",d.sidenavLeft="sidenav-on",d.isSideNavOn=!0)}}}])}(window.angular),function(a){youtubeApp.controller("videoPageController",["$rootScope","$scope","$state","$stateParams","searchService",function(b,c,d,e,f){c.formatVideoDetails=function(){moment().format("M D YY")==moment(c.video.snippet.publishedAt).format("M D YY")?c.uploadedTime=moment(c.video.snippet.publishedAt).fromNow():c.uploadedTime=moment(c.video.snippet.publishedAt).format("Do MMMM YYYY"),b.$$childHead.query="",c.likeCount=isNaN(parseInt(c.video.statistics.likeCount))?0:parseInt(c.video.statistics.likeCount),c.dislikeCount=isNaN(parseInt(c.video.statistics.dislikeCount))?0:parseInt(c.video.statistics.dislikeCount),c.dislikeWidth={width:c.dislikeCount/(c.likeCount+c.dislikeCount)*100+"%"},c.video.snippet.description.length>300&&(c.isExpandable=!0,c.expandDescriptionBar="Expand Description",c.expandDescription=function(){"expanded-description"==c.description?(c.description="",c.expandDescriptionBar="Expand Description",a.element(document).scrollToElementAnimated(videoInfo)):(c.description="expanded-description",c.expandDescriptionBar="Collapse Description")})},c.loadMoreComments=function(a){var b={videoId:c.videoId,pageToken:a,order:c.order};c.commentsLoader=!0,f.getComments(b).then(function(a){c.comments.items=c.comments.items.concat(a.items),c.comments.nextPageToken=a.nextPageToken,c.commentsLoader=!1})},c.sortComments=function(a){c.order=a;var b={videoId:c.videoId,order:c.order?c.order:"relevance"};c.commentsLoader=!0,c.comments=null,f.getComments(b).then(function(a){c.comments=a,c.commentsLoader=!1},function(a){(a.error.errors[0].reason="commentsDisabled")&&(c.commentsEnabled=!1)})},c.loadMoreVideos=function(){var a={relatedToVideoId:c.videoId,maxResults:8,pageToken:c.nextPageToken};c.loaderVideos=!0,c.nextPageToken=!1,f.searchVideos(a).then(function(a){c.relatedVideos=c.relatedVideos.concat(a.items),c.nextPageToken=a.nextPageToken,c.loaderVideos=!1;var b={videos:c.relatedVideos,part:"statistics,contentDetails"};f.getVideoDetails(b).then(function(a){c.videoDetails=c.videoDetails.concat(a)})})},c.init=function(){a.element(document).scrollTo(0,0,700),c.videoId=e.id,c.order="relevance",c.commentsEnabled=!0,c.commentsLoader=!0;var b={videoId:c.videoId,part:"snippet,statistics",fields:"items(snippet(publishedAt,channelId,description,title),statistics(commentCount,dislikeCount,likeCount,viewCount))"};f.getVideos(b).then(function(a){c.video=a.items[0],c.formatVideoDetails();var b={part:"snippet",channelId:c.video.snippet.channelId,fields:"items(id,snippet(thumbnails/default,title))"};f.getChannel(b).then(function(a){c.channel=a})});var b={relatedToVideoId:c.videoId,maxResults:20};f.searchVideos(b).then(function(a){c.relatedVideos=a.items,c.nextPageToken=a.nextPageToken;var b={videos:c.relatedVideos,part:"statistics,contentDetails"};f.getVideoDetails(b).then(function(a){c.videoDetails=a})})}}])}(window.angular);